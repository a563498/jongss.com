# PATCHLOG

## v1.4.6 (통합: v1.4.4 + v1.4.5 + 추가 수정)
- (빌드 오류 수정) `percentFromRank` export를 `functions/lib/rank.js`에 복구하여 Pages Functions 빌드 실패 해결.
- (게임 규칙) 정답 단어는 `answer_rank`(상위 유사어 목록)에서 **제외**하도록 변경.
  - 따라서 `/api/top`에 노출되는 랭킹에는 100%가 존재하지 않음(최대 99.99).
  - 정답을 맞힌 경우에만 `/api/guess`에서 `isCorrect: true`와 함께 `percent: 100.00`으로 반환.
- (유사도 강화) FTS(bm25) 1차 후보 + 정의문 키워드/구(2-그램) 겹침 기반 2차 리랭킹 유지.
- (점수) percent는 score 기반(소수점 2자리)으로 계산하여 `answer_rank.percent`에 저장.

## v1.4.9
- (랭킹 빌드) 정답 정의에서 조사/어미가 붙은 토큰을 정규화(예: 무엇인가를→무엇인가, 숨기고→숨기)하여 후보군이 0건이 되는 문제 완화.
- (랭킹 빌드) MATCH 쿼리의 AND 조건을 완화(상위 2개만 AND, 나머지는 OR)하여 후보군 확보.
- (프론트) 다크모드/눈/애니메이션 등 기존 UI 로직은 유지한 채, 한글 IME 조합 중 Enter 제출이 씹히는 문제만 최소 수정.
